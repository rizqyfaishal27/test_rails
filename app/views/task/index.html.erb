<html>
    <head></head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <%= link_to 'Logout', '/users/sign_out', method: 'delete' %>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h1>List of tasks</h1>
                    <p>
                        <%= link_to "Add Task", new_task_path, { class: "btn btn-primary" } %>
                    </p>
                    <table class="table">
                        <thead>
                            <tr>
                                <td>Task name</td>
                                <td>Description</td>
                                <td>List of changes</td>
                                <td>Actions</td>
                            </tr>
                        </thead>
                        <tbody>
                            <% @tasks.each do |task| %>
                                <tr>
                                    <td><%= task.name %></td>
                                    <td><%= task.description %></td>
                                    <td>
                                        <ul>
                                            <% task.change_set.each do | change | %>
                                                <li>
                                                    <%= change.text %>
                                                </li>
                                            <% end %>
                                        </ul>
                                    </td>
                                    <td>
                                        <%= link_to "Edit", edit_task_path(task) %>
                                        <%= link_to "Show", task_path(task) %>
                                        <%= link_to "Delete", task_path(task), method: :delete, data: { confirm: "Are you sure?"} %>
                                    </td>
                                </tr>
                            <% end %>
                        </tbody>
                    </table>
                    <p>
                        <%= @user.inspect %>
                    </p>
                </div>
            </div>
        </div>
    </body>
</html>